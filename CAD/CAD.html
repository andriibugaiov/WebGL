<!DOCTYPE html>
<html>
<head>
<script id="vertex-shader" type="x-shader/x-vertex">
uniform mat4 pMatrix;
uniform mat4 mvMatrix;

attribute vec3 vPosition;

uniform vec4 color;
varying vec4 fColor;

void main() {
    gl_Position = pMatrix * mvMatrix * vec4(vPosition, 1.0);
    fColor = color;
}
</script>

<script id="fragment-shader" type="x-shader/x-fragment">
precision mediump float;

varying vec4 fColor;

void main() {
    gl_FragColor = fColor;
}
</script>

<script type="text/javascript" src="../Common/webgl-utils.js"></script>
<script type="text/javascript" src="../Common/initShaders.js"></script>
<script type="text/javascript" src="../Common/MV.js"></script>

<script>
	var inherit = function (childObject, parentObject) {
	    var copyOfParent = Object.create(parentObject.prototype);

	    copyOfParent.constructor = childObject;
	    childObject.prototype = copyOfParent;
  	};
</script>

<script type="text/javascript" src="Object3D.js"></script>
<script type="text/javascript" src="Camera.js"></script>

<script type="text/javascript" src="Geometry.js"></script>
<script type="text/javascript" src="Geometry/SphereGeometry.js"></script>
<script type="text/javascript" src="Geometry/ConeGeometry.js"></script>
<script type="text/javascript" src="Geometry/CylinderGeometry.js"></script>

<script type="text/javascript" src="CAD.js"></script>

<script>
	var demonstrator = null;
	window.onload = function initDemonstrator() {
		demonstrator = new Demonstrator();
	};
</script>
</head>

<body>
<div>
<div>
	Shape:
	<input type="radio" name="shape" value="sphereID" checked>Sphere
	<input type="radio" name="shape" value="coneID">Cone
	<input type="radio" name="shape" value="cylinderID">Cylinder
</div>

<div>
	Rotation 'x':
	<input id="rotX" type="range" 
	min="-180" 
	max="180" 
	step="0.01" />
	<input id="boxRotX" type="text" />
</div>	
<div>
	Rotation 'y':
	<input id="rotY" type="range" 
	min="-180" 
	max="180" 
	step="0.01" />
	<input id="boxRotY" type="text" />
</div>	
<div>
	Rotation 'z':
	<input id="rotZ" type="range" 
	min="-180" 
	max="180" 
	step="0.01" />
	<input id="boxRotZ" type="text" />
</div>


<div>
	Scale:
	<input id="scaleXYZ" type="range" 
	min="0.0" 
	max="0.5" 
	step="0.01" />
	<input id="boxScale" type="text" />
</div>
<div>
	Position 'x':
	<input id="posX" type="range" 
	min="-0.5" 
	max="0.5" 
	step="0.01" />
	<input id="boxPosX" type="text" />
</div>	
<div>
	Position 'y':
	<input id="posY" type="range" 
	min="-0.5" 
	max="0.5" 
	step="0.01" />
	<input id="boxPosY" type="text" />
</div>	
<div>
	Position 'z':
	<input id="posZ" type="range" 
	min="-0.5" 
	max="0.5" 
	step="0.01" />
	<input id="boxPosZ" type="text" />
</div>

<div>
	<button id="add" type="button">Add Shape</button>
</div>
</div>

<div>
	<canvas id="gl-canvas" width="512" height="512" style="border: solid">
		Oops ... your browser doesn't support the HTML5 canvas element
	</canvas>
</div>

<script>
// mark - scale	

	var scaleXYZ = document.getElementById("scaleXYZ");
	var boxScale = document.getElementById("boxScale");
	boxScale.value = scale.value = 0.25;
	scaleXYZ.addEventListener("change", function (event) {
		boxScale.value = event.target.value;
	});
	scaleXYZ.addEventListener("input", function (event) {
		boxScale.value = event.target.value;
	});

// mark - position

	var posX = document.getElementById("posX");
	var boxPosX = document.getElementById("boxPosX");
	boxPosX.value = posX.value = 0.0;
	posX.addEventListener("change", function (event) {
		boxPosX.value = event.target.value;
	});
	posX.addEventListener("input", function (event) {
		boxPosX.value = event.target.value;
	});

	var posY = document.getElementById("posY");
	var boxPosY = document.getElementById("boxPosY");
	boxPosY.value = posY.value = 0.0;
	posY.addEventListener("change", function (event) {
		boxPosY.value = event.target.value;
	});
	posY.addEventListener("input", function (event) {
		boxPosY.value = event.target.value;
	});

	var posZ = document.getElementById("posZ");
	var boxPosZ = document.getElementById("boxPosZ");
	boxPosZ.value = posZ.value = 0.0;
	posZ.addEventListener("change", function (event) {
		boxPosZ.value = event.target.value;
	});
	posZ.addEventListener("input", function (event) {
		boxPosZ.value = event.target.value;
	});

// mark - rotation

	var rotX = document.getElementById("rotX");
	var boxRotX = document.getElementById("boxRotX");
	boxRotX.value = rotX.value = 0.0;
	rotX.addEventListener("change", function (event) {
		boxRotX.value = event.target.value;
	});
	rotX.addEventListener("input", function (event) {
		boxRotX.value = event.target.value;
	});

	var rotY = document.getElementById("rotY");
	var boxRotY = document.getElementById("boxRotY");
	boxRotY.value = rotY.value = 0.0;
	rotY.addEventListener("change", function (event) {
		boxRotY.value = event.target.value;
	});
	rotY.addEventListener("input", function (event) {
		boxRotY.value = event.target.value;
	});

	var rotZ = document.getElementById("rotZ");
	var boxRotZ = document.getElementById("boxRotZ");
	boxRotZ.value = rotZ.value = 0.0;
	rotZ.addEventListener("change", function (event) {
		boxRotZ.value = event.target.value;
	});
	rotZ.addEventListener("input", function (event) {
		boxRotZ.value = event.target.value;
	});

// mark - add shape

	var add = document.getElementById("add");
	add.addEventListener("click", function (event) {
		var xRot = Number(rotX.value);
		var yRot = Number(rotY.value);
		var zRot = Number(rotZ.value);
		var s = Number(scaleXYZ.value);
		var xPos = Number(posX.value);
		var yPos = Number(posY.value);
		var zPos = Number(posZ.value);

		var uniforms = {
			rotation: vec3(xRot, yRot, zRot),
			scale: vec3(s, s, s),
            position: vec3(xPos, yPos, zPos) 
        };

        var shapeID = null;
		var radiosShape = document.getElementsByName("shape");
		for(var i = 0; i < radiosShape.length; ++i) {
			var radio = radiosShape[i];
			if(radio.checked == true) {
				shapeID = radio.value;
				break;
		    }
	    }

	    if (demonstrator && shapeID) {
	    	demonstrator.addShape(shapeID, uniforms);
	    }
	});
</script>

<div>
	Author: Andrii Bugaiov
</div>

</body>
</html>
